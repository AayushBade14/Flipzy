<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flipzy - Books delivered under 20 mins</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Montserrat', sans-serif;
    }
    body {
      background-color: #f4f4f9;
      color: #333;
    }
    header {
      background-color: #4a90e2;
      color: white;
      padding: 1rem 2rem;
      text-align: center;
    }
    header h1 {
      font-size: 2rem;
    }
    header p {
      font-size: 1rem;
      margin-top: 0.2rem;
    }
    .location {
      font-size: 0.85rem;
      margin-top: 0.3rem;
      opacity: 0.9;
    }
    .book-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      padding: 2rem;
      justify-content: center;
    }
    .book-card {
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 220px;
      padding: 1rem;
      transition: transform 0.3s;
      position: relative;
    }
    .book-card:hover {
      transform: translateY(-5px);
    }
    .book-card.out-of-stock {
      filter: grayscale(1);
      opacity: 0.5;
      pointer-events: none;
    }
    .book-cover {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 8px;
    }
    .book-title {
      margin: 0.5rem 0;
      font-weight: 600;
    }
    .book-desc {
      font-size: 0.85rem;
      color: #555;
      display: none;
    }
    .rate {
      margin: 0.5rem 0;
    }
    .counter {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.5rem;
      display: none;
    }
    .counter span {
      padding: 0.3rem 0.8rem;
      background: #4a90e2;
      color: white;
      cursor: pointer;
      border-radius: 5px;
    }
    .issue-btn {
      margin-top: 0.8rem;
      padding: 0.4rem 0.8rem;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    .guidelines {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    .guidelines h2 {
      margin-bottom: 1rem;
      color: #4a90e2;
    }
    .guidelines ul {
      padding-left: 1.2rem;
    }
    .guidelines li {
      margin-bottom: 0.6rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Flipzy</h1>
    <p>Books delivered under 20 mins</p>
    <p class="location">Currently serving: Sector 44A, Seawoods</p>
  </header>

  <div class="book-container" id="bookList"></div>

  <div class="guidelines">
    <h2>Guidelines</h2>
    <ul>
      <li>Pay at the time of delivery.</li>
      <li>A deposit of ₹100 is required upon delivery and will be refunded after the book is returned.</li>
      <li>Return the book in the same condition you received it.</li>
      <li>No writing or markings on the books.</li>
      <li>Any damage will result in deductions from your deposit.</li>
    </ul>
  </div>

  <script>
    const books = [
      {
        title: "The Alchemist",
        rate: 10,
        image: "https://m.media-amazon.com/images/I/51Z0nLAfLmL.jpg",
        description: "A novel by Paulo Coelho about a boy chasing his dreams.",
        inStock: true
      },
      {
        title: "Rich Dad Poor Dad",
        rate: 15,
        image: "https://m.media-amazon.com/images/I/81bsw6fnUiL.jpg",
        description: "A personal finance classic by Robert Kiyosaki.",
        inStock: true
      },
      {
        title: "Out of Stock Book",
        rate: 20,
        image: "https://via.placeholder.com/150",
        description: "This book is currently unavailable.",
        inStock: false
      }
    ];

    const cart = [];

    function renderBooks() {
      const bookList = document.getElementById('bookList');
      bookList.innerHTML = '';
      books.forEach((book, index) => {
        const card = document.createElement('div');
        card.className = `book-card ${book.inStock ? '' : 'out-of-stock'}`;

        card.innerHTML = `
          <img src="${book.image}" class="book-cover" />
          <div class="book-title">${book.title}</div>
          <div class="rate">₹${book.rate}/day</div>
          <div class="book-desc">${book.description}</div>
          <div class="counter" id="counter-${index}">
            <span onclick="updateDays(${index}, -1)">-</span>
            <span id="days-${index}">1</span>
            <span onclick="updateDays(${index}, 1)">+</span>
          </div>
          <button class="issue-btn" onclick="toggleCart(${index})" id="btn-${index}">Add to cart</button>
        `;

        card.addEventListener('click', (e) => {
          if (!e.target.classList.contains('issue-btn')) {
            const desc = card.querySelector('.book-desc');
            desc.style.display = desc.style.display === 'block' ? 'none' : 'block';
          }
        });

        bookList.appendChild(card);
      });
    }

    function toggleCart(index) {
      const existing = cart.find(b => b.index === index);
      if (!existing) {
        cart.push({ index, days: 1 });
        document.getElementById(`counter-${index}`).style.display = 'flex';
        document.getElementById(`btn-${index}`).textContent = 'Added';
      } else {
        cart.splice(cart.indexOf(existing), 1);
        document.getElementById(`counter-${index}`).style.display = 'none';
        document.getElementById(`days-${index}`).textContent = '1';
        document.getElementById(`btn-${index}`).textContent = 'Add to cart';
      }
    }

    function updateDays(index, delta) {
      const item = cart.find(b => b.index === index);
      if (item) {
        item.days = Math.max(1, item.days + delta);
        document.getElementById(`days-${index}`).textContent = item.days;
      }
    }

    function checkout() {
      if (cart.length === 0) return alert("No books in cart.");

      let message = "Hi, I'd like to issue the following books:\n";
      let total = 0;

      cart.forEach(item => {
        const book = books[item.index];
        const cost = book.rate * item.days;
        total += cost;
        message += `\nTitle: ${book.title}\nDays: ${item.days}\nRate: ₹${book.rate}/day\nSubtotal: ₹${cost}\n`;
      });

      message += `\nDeposit: ₹100\nTotal Rent: ₹${total}\nGrand Total (Rent + Deposit): ₹${total + 100}`;

      const whatsappURL = `https://wa.me/918369444435?text=${encodeURIComponent(message)}`;
      window.open(whatsappURL, '_blank');
    }

    renderBooks();
  </script>

  <div style="text-align:center; padding: 1rem;">
    <button onclick="checkout()" style="padding: 0.7rem 1.2rem; font-size: 1rem; background: #4a90e2; color: white; border: none; border-radius: 8px; cursor: pointer;">Proceed to Issue</button>
  </div>
</body>
</html>
