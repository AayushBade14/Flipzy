<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flipzy - Books delivered under 20 mins</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #f5f5f5;
      color: #333;
    }
    header {
      background: #74b9ff;
      color: white;
      padding: 1em;
      text-align: center;
    }
    .tagline, .area, .timing {
      margin: 0.2em 0;
      font-size: 0.9em;
    }
    .category-menu {
      margin-top: 1em;
    }
    .category-menu button {
      margin: 0.3em;
      padding: 0.5em 1em;
      border: none;
      background: white;
      color: #0984e3;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }
    .category-menu button:hover {
      background: #dfe6e9;
    }
    #book-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 1em;
    }
    .book-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin: 1em;
      padding: 1em;
      width: 200px;
      transition: transform 0.2s;
      position: relative;
    }
    .book-card:hover {
      transform: translateY(-5px);
    }
    .book-card img {
      width: 100%;
      height: auto;
      border-radius: 5px;
    }
    .book-card.out-of-stock {
      background: #e0e0e0;
      color: #999;
    }
    .out-of-stock-label {
      color: red;
      font-weight: bold;
      text-align: center;
      margin-top: 0.5em;
    }
    .book-card button {
      margin-top: 0.5em;
      padding: 0.3em 0.6em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .desc {
      display: none;
      margin-top: 0.5em;
      font-size: 0.85em;
    }
    .counter {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.5em;
    }
    #proceed-btn {
      display: block;
      margin: 2em auto;
      padding: 1em 2em;
      background: #0984e3;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    #guidelines {
      max-width: 700px;
      margin: 2em auto;
      padding: 1em;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    #guidelines h2 {
      color: #0984e3;
    }
    footer {
      text-align: center;
      padding: 1em;
      background: #eee;
    }
  </style>
</head>
<body>
  <header>
    <h1 style="display: flex; align-items: center; justify-content: center; gap: 0.5em;">
     <img src="resources/logo.png" alt="Flipzy Logo" style="height: 40px;" />
      Flipzy
    </h1>

    <p class="tagline">Books delivered under 20 mins</p>
    <p class="area">Serving Sector 44A, Seawoods</p>
    <p class="timing">Timing: Monâ€“Sun, 10 AM to 9 PM</p>
    <nav class="category-menu" id="category-menu">
      <!-- Buttons will be generated here -->
    </nav>
  </header>

  <main id="book-container"></main>
  <button id="proceed-btn" onclick="proceedToIssue()">Proceed to Issue</button>

  <!-- âœ… Guidelines Section -->
  <section id="guidelines">
    <h2>Guidelines</h2>
    <ul>
      <li>All books must be returned in good condition.</li>
      <li>Late returns will incur a fine of â‚¹5/day.</li>
      <li>Each user can issue a maximum of 3 books at a time.</li>
      <li>Refundable deposit of â‚¹100 is required for every order.</li>
      <li>Delivery is currently only available in Sector 44A, Seawoods.</li>
    </ul>
  </section>

  <script>
    const books = [
      {
        title: "Diary of a Wimpy Kid : Dog Days",
        image: "https://m.media-amazon.com/images/I/51t15vTaW9L._SY445_SX342_.jpg",
        rate: 44,
        description: "This book starts with Greg talking about being an indoor person and how he wants to spend his summer inside his home, playing video games and doing his favourite activities. His plans come to a standstill when his mom announces that they are going to spend the summer outdoors, bonding as a family. Greg has to take the trip with his family. Another major event in his life this summer is the addition of a new member in his family: a new dog.",
        available: true,
        category: "English"
      },
      {
        title: "The Alchemist",
        image: "resources/logo.png",
        rate: 12,
        description: "A philosophical story about a shepherdâ€™s journey to find treasure.",
        available: true,
        category: "Fiction"
      },
      {
        title: "Rich Dad Poor Dad",
        image: "resources/logo.png",
        rate: 15,
        description: "A book on financial independence and building wealth.",
        available: false,
        category: "Finance"
      }
    ];

    const cart = {};
    let currentFilter = 'all';

    function renderCategoryButtons() {
      const menu = document.getElementById('category-menu');
      menu.innerHTML = ''; // âœ… Clear previous buttons

      const allBtn = document.createElement('button');
      allBtn.textContent = "All Books";
      allBtn.onclick = () => filterBooks('all');
      menu.appendChild(allBtn);

      const uniqueCategories = [...new Set(books.map(b => b.category))];
      uniqueCategories.forEach(cat => {
        const btn = document.createElement('button');
        btn.textContent = cat;
        btn.onclick = () => filterBooks(cat);
        menu.appendChild(btn);
      });
    }

    function renderBooks(filter = 'all') {
      const container = document.getElementById('book-container');
      container.innerHTML = '';

      books.forEach(book => {
        if (filter !== 'all' && book.category !== filter) return;

        const card = document.createElement('div');
        card.className = 'book-card' + (!book.available ? ' out-of-stock' : '');

        card.innerHTML = `
          <img src="${book.image}" alt="${book.title}" />
          <h3>${book.title}</h3>
          <p>â‚¹${book.rate}/day</p>
          <button onclick="toggleDescription(this)">Description</button>
          <p class="desc">${book.description}</p>
        `;

        if (!book.available) {
          const outLabel = document.createElement('p');
          outLabel.className = 'out-of-stock-label';
          outLabel.textContent = 'Out of Stock';
          card.appendChild(outLabel);
        } else {
          const counter = document.createElement('div');
          counter.className = 'counter';

          const minus = document.createElement('button');
          minus.textContent = '-';
          minus.onclick = () => adjustDays(book.title, -1);

          const display = document.createElement('span');
	  display.id = `days-${book.title}`;
          display.textContent = `${cart[book.title] || 0} day(s)`;

          const plus = document.createElement('button');
          plus.textContent = '+';
          plus.onclick = () => adjustDays(book.title, 1);

          counter.append(minus, display, plus);
          card.appendChild(counter);
        }

        container.appendChild(card);
      });
    }

    function toggleDescription(btn) {
      const desc = btn.nextElementSibling;
      desc.style.display = desc.style.display === 'block' ? 'none' : 'block';
    }

    function adjustDays(title, change) {
      cart[title] = Math.max(0, (cart[title] || 0) + change);
      document.getElementById(`days-${title}`).textContent = `${cart[title]} day(s)`;

    }

    function proceedToIssue() {
      let msg = "Hello! I want to issue the following books:\n\n";
      let total = 0;

      for (const title in cart) {
        if (cart[title] > 0) {
          const book = books.find(b => b.title === title);
          const cost = cart[title] * book.rate;
          msg += `ðŸ“˜ ${title} - ${cart[title]} day(s) x â‚¹${book.rate} = â‚¹${cost}\n`;
          total += cost;
        }
      }

      if (total === 0) return alert("Add at least one book to proceed.");

      msg += `\nSubtotal: â‚¹${total}\nRefundable Deposit: â‚¹100\nTotal Payable: â‚¹${total + 100}`;
      const encoded = encodeURIComponent(msg);
      window.location.href = `https://wa.me/918369444435?text=${encoded}`;
    }

    function filterBooks(category) {
      currentFilter = category;
      renderBooks(category);
    }

    // Initial rendering
    renderCategoryButtons();
    renderBooks(currentFilter);
  </script>
</body>
</html>
